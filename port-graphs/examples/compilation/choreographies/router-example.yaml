# Router pattern example
# Demonstrates conditional routing based on data patterns

gadgets:
  # Input tap
  input:
    type: tap
    initial: {}

  # Router that directs messages based on content
  router:
    type: router
    initial:
      routes:
        - match: { type: "number" }
          to: "number_handler"
        - match: { type: "string" }
          to: "string_handler"
        - match: { type: "error" }
          to: "error_handler"

  # Handlers for different types
  number_accumulator:
    type: unionCell
    initial: []

  string_collector:
    type: arrayUnionCell
    initial: []

  error_logger:
    type: logger
    initial:
      prefix: "[ERROR]"

  # Result loggers
  number_logger:
    type: logger
    initial:
      prefix: "[NUMBERS]"

  string_logger:
    type: logger
    initial:
      prefix: "[STRINGS]"

# Bootstrap with various message types
bootstrap:
  - to: router
    data:
      type: "number"
      value: 42

  - to: router
    data:
      type: "string"
      value: "hello"

  - to: router
    data:
      type: "number"
      value: 17

  - to: router
    data:
      type: "error"
      message: "Something went wrong"

  - to: router
    data:
      type: "string"
      value: "world"