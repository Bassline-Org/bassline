; server.bl
do "gadgets.bl"

counter: defgadget [
    state: [count: 0]
    receive: func [value] [
        state/count: + state/count value
        state/count
    ]
]

server: listen 8080

on server 'message [
    print "Received:"
    print data
    result: counter/receive data
    print result
]

print "Server ready"
forever [wait 0.1]